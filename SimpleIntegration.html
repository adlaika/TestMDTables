<p><a href="#stt">Simple Transaction Tracking</a></p>
<h1 id="simple-conversion-tracking-integration">Simple Conversion Tracking Integration</h1>
<h2 id="overview">Overview</h2>
<p>This document provides technical specifications for advertisers integrating transaction tracking with CJ using the simple iframe version of CJ's tracking tag.</p>
<p>Advertisers must work with a CJ Client Integration Engineer (CIE) to make any integration changes. Advertisers can contact Client Support or submit a request through the Support Center to be assigned a CIE. This document is meant to serve as a guide and must be accompanied by documentation provided by a CIE that contains details specific to the advertiser's account.</p>
<p>All integration changes must be tested along with a CIE before being pushed live, to avoid any breakages in tracking.</p>
<h3 id="how-cjs-browser-based-tracking-works">How CJ's Browser-Based Tracking Works</h3>
<p>Advertisers send transaction data is to CJ using a browser-based tracking tag. The tracking tags are only fired on the website's transaction confirmation page(s).</p>
<p>When a user clicks on a CJ link, a cookie is created in the browser if a CJ cookie does not already exist. This cookie is assigned a surfer ID that persists in the user's browser. When the advertiser displays the tracking tag, CJ reads the surfer ID and looks for clicks and impressions for that user.</p>
<p>If CJ can find clicks or impressions for that user, then those are correlated to the transaction using Program Terms set up by the advertiser.</p>
<h2 id="actions">Actions</h2>
<p>Actions are advertiser-defined behavior a customer must complete in order for a publisher to receive a commission. Actions can be either leads or sales, and can be sent using simple or advanced data. Your CJ team will help you determine with options are best for you.</p>
<h3 id="simple-transaction-tracking"><a href="#stt"> Simple Transaction Tracking</h3>
<p>Simple tracking requires the advertiser to send basic information about a transaction, like an order ID and order subtotal. This method works well when the advertiser does not want to track item-level data about a purchase or lead.</p>
<h3 id="advanced-transaction-tracking">Advanced Transaction Tracking</h3>
<p>Advanced tracking requires the advertiser to send item-level information about a purchase or lead. This method allows for product-level reporting and item-level commissioning.</p>
<h2 id="integration-options">Integration Options</h2>
<p>CJ recommends that every advertiser integrates with an unconditional CJ tracking tag that fires for all transactions on their website. CJ recommends this method because it gives the advertiser access to Cross-Device Tracking and more robust reporting. If the advertiser chooses conditionally fire their conversion tag, they cannot access Cross-Device Tracking.</p>
<h3 id="custom-parameters">Custom Parameters</h3>
<p>CJ can pass URL parameters to the advertiser's website in the query string when a user clicks a CJ link. Advertisers can choose what name=value pairs they want passed. CJ has some standard values that can be passed, like the publisher website ID (PID or CJPID) and the link ID (AID or CJAID). Advertisers can also have custom name=value pairs to indicate, for example, that a user came from CJ (i.e. ref=cj or source=aff).</p>
<h3 id="cookie-requirements-for-conditional-tags">Cookie Requirements for Conditional Tags</h3>
<p>If the advertiser chooses to apply conditional logic to their CJ tags, it is the advertiser’s responsibility to create their own cookie to track visitors who leave and return, in order to recognize that the visitor was initially CJ- referred and activate CJ-related tracking.</p>
<ul>
<li>Last-click attribution must be used: the last network to send the visitor gets credit for the transaction</li>
<li>The cookie must be active for the Program Term's action referral period or longer, with a minimum of 24 hours</li>
<li>The user should also get credit for the same amount of occurrences as outlined in the Program Terms. This can vary from one occurrence to unlimited occurrences</li>
</ul>
<h2 id="integrating-the-conversion-tag">Integrating the Conversion Tag</h2>
<p>The conversion tag resides in the HTML body of your Thank You, confirmation, and/or receipt page, which displays following the valid sale or lead process. This page displays the final ordering information, including the order ID, the sale amount, and/or items sold.</p>
<p>Your system must pass our script two vital pieces of information:</p>
<ul>
<li>The unique identifier (OID) specifically captured or generated during the order process</li>
<li>The order subtotal before taxes and shipping</li>
</ul>
<p>The remaining parameters within the conversion tag are static and can be hard-coded into the URL call for that IFRAME (see the table on the next page). You may place the conversion tag within any dynamic programming language.</p>
<aside class="notice">
Important: Use one tag on a confirmation page. Using multiple integration tags on one page interferes with performance.
</aside>
<h2 id="tag-parameter-summary">Tag Parameter Summary</h2>
<table>
<colgroup>
<col width="16%" />
<col width="83%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">PARAMETER</th>
<th align="left">REQUIRED / OPTIONAL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>CID</p></td>
<td align="left"><p>REQUIRED</p></td>
</tr>
<tr class="even">
<td align="left"><p>OID</p></td>
<td align="left"><p>REQUIRED</p></td>
</tr>
<tr class="odd">
<td align="left"><p>TYPE</p></td>
<td align="left"><p>REQUIRED</p></td>
</tr>
<tr class="even">
<td align="left"><p>CURRENCY</p></td>
<td align="left"><p>REQUIRED</p></td>
</tr>
<tr class="odd">
<td align="left"><p>AMOUNT</p></td>
<td align="left"><p>REQUIRED</p></td>
</tr>
<tr class="even">
<td align="left"><p>DISCOUNT</p></td>
<td align="left"><p>OPTIONAL - SEE NOTES BELOW</p></td>
</tr>
<tr class="odd">
<td align="left"><p>COUPON</p></td>
<td align="left"><p>OPTIONAL - SEE NOTES BELOW</p></td>
</tr>
<tr class="even">
<td align="left"><p>CHANNEL</p></td>
<td align="left"><p>OPTIONAL - not to be used unless instructed by a CJ team member</p></td>
</tr>
<tr class="odd">
<td align="left"><p>CHANNEL_TS</p></td>
<td align="left"><p>OPTIONAL - not to be used unless instructed by a CJ team member</p></td>
</tr>
</tbody>
</table>
<h2 id="conversion-tag-parameters">Conversion Tag Parameters</h2>
<aside class="notice">
Note: Parameters are not case-sensitive.
</aside>
<table style="width:97%;">
<colgroup>
<col width="11%" />
<col width="5%" />
<col width="22%" />
<col width="58%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">PARAM ETER</th>
<th align="left">R E Q U I R E D</th>
<th align="left">EXAMPLE</th>
<th align="left">NOTES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>CID</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"><p>CID=123456</p></td>
<td align="left"><p>This value is set to the Enterprise ID, which is a static value provided by CJ.</p></td>
</tr>
<tr class="even">
<td align="left"><p>OID</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"><p>OID=145_683- ABC</p></td>
<td align="left"><p>The OID is a unique identifier, such as an order identifier or invoice number, which must be populated for each order. It is used to reconcile orders in the advertiser's system with CJ in order to validate each sale or lead.</p>
<ul>
<li>This value will be truncated after the 96th character</li>
<li>Only alphanumeric characters, dashes, and underscores can be included in the OID field</li>
<li>CJ prohibits the submission of personally identifiable information in the OID field, such as a full or partial email address</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>TYPE</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"><p>TYPE=5634</p></td>
<td align="left"><p>This is a static value provided by CJ; it is also called an Action ID in the Account Manager. Each account may have multiple actions and each will be referenced by a different TYPE value.</p></td>
</tr>
<tr class="even">
<td align="left"><p>AMOUN T</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"><p>AMOUNT=87.49</p></td>
<td align="left"><p>The system assumes the AMOUNT= value is in the currency specified in the CURRENCY parameter. If you specify a currency other than your functional currency, the system converts the AMOUNT= value to an amount in your functional currency using a current conversion rate.</p>
<p>The amount value should not include shipping or tax.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>DISCO UNT</p></td>
<td align="left"><p>N O</p></td>
<td align="left"><p>DISCOUNT=12.9 9</p></td>
<td align="left"><p>Discount parameter which enables you to apply a whole order discount to a transaction.</p>
<p>An order which contain multiple items distributes the DISCOUNT value throughout the items, based on the item amounts.</p></td>
</tr>
<tr class="even">
<td align="left"><p>CURRE NCY</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"><p>CURRENCY=USD</p></td>
<td align="left"><p>Identifies the currency used to determine the AMT value for each item involved in the action. This three-letter code is static and can be hard-coded into the URL call for the image.</p>
<p>If a code is not specified, product prices display in the advertiser’s functional currency. If a blank value is submitted (“CURRENCY=”, with no specified value), a transaction error will occur.</p>
<p>For a list of supported currencies and codes, please visit the Support Center.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>COUPO N</p></td>
<td align="left"><p>N O</p></td>
<td align="left"><p>COUPON=10off1 00</p></td>
<td align="left"><p>Parameter for a coupon, voucher or discount code applied at the time of purchase.</p></td>
</tr>
<tr class="even">
<td align="left"><p>CONTA INER TAG ID</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"></td>
<td align="left"><p>The unique identifier for the conversion tag.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>NAME</p></td>
<td align="left"><p>Y E S</p></td>
<td align="left"></td>
<td align="left"><p>If you have multiple conversion tags, you can use this parameter to uniquely identify your tags.</p></td>
</tr>
<tr class="even">
<td align="left"><p>CHANN EL</p></td>
<td align="left"><p>N O</p></td>
<td align="left"></td>
<td align="left"><p><em>Only use this parameter if instructed by your assigned CJ Client Integration Engineer</em></p>
<p>This parameter is where the advertiser passes the channel to which they attribute the last click.</p>
<p>See the table below for acceptable values and their meanings.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>CHANN EL_T S</p></td>
<td align="left"><p>N O</p></td>
<td align="left"><p>CHANNEL_TS=2 017-02-14T22: 16:46.623Z</p></td>
<td align="left"><p><em>Only use this parameter if instructed by your assigned CJ Client Integration Engineer</em></p>
<p>This parameter is where the advertiser passes the date/time stamp for the last click that they are attributing the transaction to. They must use this format: NOTES: * format: yyyy-mm-ddThh24:mm:ss.sssZ * all dates and times must be in UTC * the .toISOString() method in javaScript to produces this format * this is the only format CJ's system will accept</p></td>
</tr>
</tbody>
</table>
<h3 id="channel-parameter-values">Channel Parameter Values</h3>
<table style="width:97%;">
<colgroup>
<col width="18%" />
<col width="19%" />
<col width="59%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">CHANNEL PARAMETER VALUE</th>
<th align="left">ELIGIBLE FOR CJ COMMISSION</th>
<th align="left">WHEN TO USE IT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>CJ</p></td>
<td align="left"><p>YES</p></td>
<td align="left"><p>When the customer's last click was from a CJ affiliate link</p></td>
</tr>
<tr class="even">
<td align="left"><p>DIRECT</p></td>
<td align="left"><p>YES</p></td>
<td align="left"><p>When the customer navigated directly to the advertiser's website</p>
<aside class="notice">
Important: Do not overwrite other channels with 'direct'. If there is a click for another marketing channel before a user navigates directly to the site, the 'channel' parameter must reflect that previous click.
</aside></td>
</tr>
<tr class="odd">
<td align="left"><p>AFFILIATE<br />
_OTHER</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from an affiliate channel other than CJ</p></td>
</tr>
<tr class="even">
<td align="left"><p>DISPLAY</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from a display campaign</p></td>
</tr>
<tr class="odd">
<td align="left"><p>SOCIAL</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from a social media campaign</p></td>
</tr>
<tr class="even">
<td align="left"><p>SEARCH</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from a search campaign</p></td>
</tr>
<tr class="odd">
<td align="left"><p>EMAIL</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from an email campaign</p></td>
</tr>
<tr class="even">
<td align="left"><p>OTHER</p></td>
<td align="left"><p>NO</p></td>
<td align="left"><p>When the customer's last click was from a campaign not defined by the values above</p></td>
</tr>
</tbody>
</table>
<p>NOTE:</p>
<ul>
<li>CJ will consider a transaction eligible for commission in the following scenarios:
<ul>
<li>channel=cj</li>
<li>channel=direct</li>
<li>channel=[unrecognized value]</li>
<li>channel= [blank]</li>
<li>channel does not exist in tag<br />
</li>
</ul></li>
<li>The parameter name and values are not case sensitive</li>
<li>If 'direct' is not included as a 'channel' value, the advertiser is not eligible for cross- device tracking</li>
</ul>
<h3 id="conversion-tag-examples">Conversion Tag Examples</h3>
<p>The following are examples of the conversion tag for simple conversion tracking integration. These coding examples are provided as a courtesy and for your reference only. These examples may not work for your specific shopping cart or web site. CJ does not guarantee the accuracy of these coding examples.</p>
<p>Remember that the tracking tag should be placed within the HTML body of the order’s Thank You, confirmation, and/or receipt page following the order or application process. The AMOUNT and OID variables are populated after submission of the action.</p>
<p>Placeholders with brackets denote the location of required values. Brackets are for illustration purposes only, and should NOT be placed in the actual code. In the example, the TYPE value is paired with a CJ-assigned Action ID number, which identifies the action that has occurred.</p>
<p>Once the conversion tag has been configured to dynamically place the transaction information needed by CJ to process orders, place the final version of the conversion tag within the HTML body of the advertiser’s order confirmation page. Place the conversion tag near the top of the page within the opening and closing body &lt;BODY&gt; tags with no visible line breaks. At this point, Technical Services will verify action integration to ensure the placement of the correct data.</p>
<h4 id="simple-conversion-tracking-integration-html-example">Simple Conversion Tracking Integration HTML Example</h4>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="co">&lt;!-- </span><span class="re">BEGIN</span><span class="co"> CJ TRACKING CODE – DO NOT MODIFY --&gt;</span>
<span class="kw">&lt;iframe</span><span class="ot"> height=</span><span class="st">&quot;1&quot;</span><span class="ot"> width=</span><span class="st">&quot;1&quot;</span><span class="ot"> frameborder=</span><span class="st">&quot;0&quot;</span><span class="ot"> scrolling=</span><span class="st">&quot;no&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://www.emjcd.com/tags/c?containerTagId=</span><span class="er">&lt;</span><span class="st">CONTAINERID&gt;</span><span class="er">&amp;</span><span class="st"> AMOUNT=</span><span class="er">&lt;</span><span class="st">AMOUNT&gt;</span><span class="er">&amp;</span><span class="st">CID=</span><span class="er">&lt;</span><span class="st">ENTERPRISEID&gt;</span><span class="er">&amp;</span><span class="st">OID=</span><span class="er">&lt;</span><span class="st">OID&gt;</span><span class="er">&amp;</span><span class="st">TYPE=</span><span class="er">&lt;</span><span class="st">ACTIONID&gt;</span><span class="er">&amp;</span><span class="st">CURRENCY=</span><span class="er">&lt;</span><span class="st">CURRENCY&gt;&quot;</span><span class="ot"> name=</span><span class="st">Conversion</span><span class="ot"> tag</span><span class="kw">&gt;</span> <span class="kw">&lt;/iframe&gt;</span>
<span class="co">&lt;!-- </span><span class="re">END</span><span class="co"> CJ TRACKING CODE --&gt;</span></code></pre></div>
<h4 id="simple-conversion-tracking-integration-javascript-example">Simple Conversion Tracking Integration JavaScript Example</h4>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="co">&lt;!-- </span><span class="re">BEGIN</span><span class="co"> CJ TRACKING CODE - DO NOT MODIFY --&gt;</span> <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span>
<span class="va">document</span>.<span class="at">write</span>(<span class="st">&#39;&lt; iframe height=&quot;1&quot; width=&quot;1&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;https://www.emjcd.com/tags/c?containerTagId=&lt;CONTAINERID&gt;&amp;AMOUNT=&#39;</span><span class="op">+</span>
[Order[<span class="dv">3</span>]] <span class="op">+</span><span class="st">&#39;&amp;CID=&lt;ENTERPRISEID&gt;&amp;OID=&#39;</span> <span class="op">+</span> [Order[<span class="dv">0</span>]] <span class="op">+</span><span class="st">&#39;&amp;TYPE=&lt;ACTIONID&gt;&amp;CURRENCY=&lt;CURRENCY&gt;&quot; name=&quot;cj_conversion&quot;&gt;&lt;/iframe&gt;&#39;</span>)<span class="op">;</span>
<span class="kw">&lt;/script&gt;</span>
<span class="co">&lt;!-- </span><span class="re">END</span><span class="co"> CJ TRACKING CODE --&gt;</span></code></pre></div>
<h4 id="simple-conversion-tracking-integration-asp-example">Simple Conversion Tracking Integration ASP Example</h4>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="er">&lt;</span>% Username = Request.Form(&quot;Username&quot;) Password = Request.Form(&quot;password&quot;) Contact_Name = Request.Form(&quot;Contact_Name&quot;) Phone = Request.Form(&quot;Phone&quot;)
Credit_Card = Request.Form(&quot;Credit_Card&quot;) Address = Request.Form(&quot;address&quot;) Hosting_Plan = Request.Form(&quot;Subtotal&quot;)
Card_Number = Request.Form(&quot;Card_Number&quot;) Expiration = Request.Form(&quot;Expiration&quot;) Name_On_Card = Request.Form(&quot;Name_On_Card&quot;)
%&gt; Thank you, <span class="er">&lt;</span>% = Contact_Name %&gt; for your order.<span class="kw">&lt;/center&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;</span> <span class="kw">&lt;tr&gt;&lt;td&gt;</span>Hosting Plan: <span class="kw">&lt;td&gt;</span><span class="er">&lt;</span>% = Subtotal %&gt;<span class="kw">&lt;br&gt;&lt;/td&gt;&lt;tr&gt;</span> <span class="kw">&lt;tr&gt;&lt;td&gt;&lt;p&gt;</span>Username: <span class="kw">&lt;td&gt;</span><span class="er">&lt;</span>% = Username %&gt;<span class="kw">&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;</span> <span class="kw">&lt;tr&gt;&lt;td&gt;</span>Password: <span class="kw">&lt;td&gt;</span><span class="er">&lt;</span>% = Password %&gt;<span class="kw">&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;</span> <span class="kw">&lt;p&gt;</span>
<span class="co">&lt;!-- </span><span class="re">BEGIN</span><span class="co"> CJ TRACKING CODE - DO NOT MODIFY --&gt;</span>
<span class="kw">&lt;iframe</span><span class="ot"> height=</span><span class="st">&quot;1&quot;</span><span class="ot"> width=</span><span class="st">&quot;1&quot;</span><span class="ot"> frameborder=</span><span class="st">&quot;0&quot;</span><span class="ot"> scrolling=</span><span class="st">&quot;no&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://www.emjcd.com/tags/c?containerTagId=</span><span class="er">&lt;</span><span class="st">CONTAINERID&gt;</span><span class="er">&amp;</span><span class="st">CID=</span><span class="er">&lt;</span><span class="st">ENTERPRISEID&gt;</span><span class="er">&amp;</span><span class="st">OID=</span><span class="er">&lt;</span><span class="st">OID&gt;</span><span class="er">&amp;</span><span class="st">TYPE =</span><span class="er">&lt;</span><span class="st">ACTIONID&gt;</span><span class="er">&amp;</span><span class="st">AMOUNT=</span><span class="er">&lt;</span><span class="st">AMOUNT&gt;</span><span class="er">&amp;</span><span class="st">DISCOUNT=</span><span class="er">&lt;</span><span class="st">DISCOUNT&gt;</span><span class="er">&amp;</span><span class="st">CURRENCY=</span><span class="er">&lt;</span><span class="st">CURRENCY&gt;&quot;</span><span class="ot"> name=</span><span class="st">Conversion</span><span class="ot"> tag</span><span class="kw">&gt;&lt;/iframe&gt;&lt;/font&gt;&lt;/td&gt;</span>
<span class="co">&lt;!--</span><span class="re">END</span><span class="co"> CJ TRACKING CODE.--&gt;</span></code></pre></div>
